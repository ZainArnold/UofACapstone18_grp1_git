## Example Summary

Application to demonstrate use of the SPI driver to create a simple external
loop-back.

## Peripherals Exercised

* `Board_GPIO_LED0` - Indicator LED
* `Board_SPI0` - SPI peripheral assigned as a Master
* `Board_SPI1` - SPI peripheral assigned as a Slave

## Resources & Jumper Settings

> If you're using an IDE (such as CCS or IAR), please refer to Board.html in your project
directory for resources used and board-specific jumper settings. Otherwise, you can find
Board.html in the directory \<SDK_INSTALL_DIR\>/source/ti/boards/\<BOARD\>.


## Example Usage

* Open a serial session (e.g. [`PuTTY`](http://www.putty.org/ "PuTTY's Homepage"), etc.) to the appropriate COM port.
    * The COM port can be determined via Device Manager in Windows or via `ls /dev/tty*` in Linux.

The connection will have the following settings:
```
    Baud-rate:     115200
    Data bits:          8
    Stop bits:          1
    Parity:          None
    Flow Control:    None
```

* Run the example. `Board_GPIO_LED0` turns ON to indicate driver
initialization is complete.

* Once initialized, the Slave SPI will send a message to the Master SPI.
The Master SPI will also send a message to the Slave SPI. After the transfer is
complete, the messages are printed via UART.

Messages should appear as follows:
```
        SPI initialized
        SPI initialized
        Slave: Hello, this is master SPI
        Master: Hello, this is slave SPI
        Done
```

## Application Design Details

This application uses two threads:

`masterThread` - creates the Master SPI message and initiates the SPI transfer.
`slaveThread` - creates the Slave SPI message and waits for the Master to
start the SPI transaction. This thread runs at a higher priority
than the masterThread, the Slave SPI must be ready before the
Master SPI starts the transaction.

The `masterThread` performs the following actions:

1. Opens and initializes an SPI driver object.

2. Creates a SPI transaction structure and sets txBuffer to `Hello, this is
master SPI`.

3. Transfers the message. If the transfer is successful, the message
received from the Slave SPI is printed. Otherwise, an error message
is printed.

4. Closes the SPI driver object and terminates execution.

The `slaveThread` performs the following actions:

1. Opens and initializes an SPI driver object.

2. Creates a SPI transaction structure and sets txBuffer to `Hello, this is
slave SPI`.

3. Waits for the Master SPI before sending the message. If the transfer is
successful, the message received from the Master SPI is printed.
Otherwise, an error message is printed.

4. Closes the SPI driver object.

TI-RTOS:

* When building in Code Composer Studio, the configuration project will be imported
along with the example. The configuration project is referenced by the example, so it
will be built first.  These projects can be found under
\<SDK_INSTALL_DIR>\/kernel/tirtos/builds/\<BOARD\>/(release|debug)/(ccs|gcc).

FreeRTOS:

* Please view the `FreeRTOSConfig.h` header file for example configuration
information.
